<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cs.jo - S&B Management</title>
    <style>
        :root { --primary: #007bff; --bg: #0f172a; --card: #1e293b; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); color: white; margin: 0; padding: 15px; text-align: right; }
        
        .header { text-align: center; margin-bottom: 20px; }
        .logo-container { width: 100px; height: 100px; margin: 0 auto 10px; background: white; border-radius: 20px; display: flex; align-items: center; justify-content: center; border: 3px solid var(--primary); overflow: hidden; }
        .logo-container img { width: 90%; height: auto; }
        
        h1 { margin: 0; font-size: 26px; color: var(--primary); }
        .stats { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-box { background: var(--card); padding: 15px; border-radius: 12px; text-align: center; border-bottom: 3px solid var(--primary); }
        .stat-num { font-size: 24px; font-weight: bold; color: var(--primary); display: block; }

        .main-card { background: var(--card); padding: 20px; border-radius: 16px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 10px; border: 1px solid #334155; background: #020617; color: white; font-size: 16px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; border-radius: 10px; border: none; background: var(--primary); color: white; font-weight: bold; font-size: 16px; cursor: pointer; }
        
        .result-item { background: #020617; padding: 15px; border-radius: 10px; margin-top: 15px; border-right: 5px solid var(--primary); line-height: 1.6; }
        .status-tag { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 12px; margin-bottom: 5px; background: #334155; color: #38bdf8; }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo-container">
            <img src="https://graph.facebook.com/Mawgif.Jo/picture?type=large" alt="Mawgif Logo">
        </div>
        <h1>Cs.jo</h1>
        <p style="color: #94a3b8; font-size: 12px;">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª - S&B</p>
    </div>

    <div class="stats">
        <div class="stat-box">
            <span class="stat-num" id="memberCount">1,998</span>
            <span style="font-size: 11px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†</span>
        </div>
        <div class="stat-box">
            <span class="stat-num" id="errorToday">0</span>
            <span style="font-size: 11px;">Ø£Ø¹Ø·Ø§Ù„ Ø§Ù„ÙŠÙˆÙ…</span>
        </div>
    </div>

    <div class="main-card">
        <h3 style="margin:0; font-size:16px;">ğŸ” ÙØ­Øµ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ (CSV)</h3>
        <input id="searchKey" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø£Ùˆ Ø§Ù„Ø§Ø³Ù…...">
        <button onclick="searchMember()">ÙØ­Øµ Ø§Ù„ØªØ°ÙƒØ±Ø©</button>
        <div id="resultArea"></div>
    </div>

    <script>
        const API_URL = "https://rosytalk1.khaled-media.workers.dev";

        async function searchMember() {
            const q = document.getElementById("searchKey").value;
            const res = document.getElementById("resultArea");
            if(!q) return;

            res.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù…Ù„Ù MEMBERS...";
            try {
                const response = await fetch(`${API_URL}/search?q=${encodeURIComponent(q)}`);
                const data = await response.json();

                if(data.length > 0) {
                    const item = data[0];
                    // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø£Ø¹Ù…Ø¯Ø© Ù…Ù„Ù CSV Ø§Ù„Ù…Ø±ÙÙ‚
                    res.innerHTML = `
                        <div class="result-item">
                            <span class="status-tag">Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ØªÙ…Ø¯Ø©</span><br>
                            <b>Ø§Ù„Ø´Ø±ÙƒØ©:</b> ${item.name} <br>
                            <b>Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©/Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</b> ${item.car_plate} <br>
                            <b>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:</b> ${item.notes || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}
                        </div>`;
                } else {
                    res.innerHTML = "Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†.";
                }
            } catch (e) {
                res.innerHTML = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±.";
            }
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cs.jo - S&B Portal</title>
    <style>
        :root { --blue: #007bff; --dark: #0f172a; --card: #1e293b; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--dark); color: white; margin: 0; padding: 15px; }
        #loginScreen { position: fixed; inset: 0; background: var(--dark); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; }
        .logo { width: 80px; height: 80px; background: white; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; border: 3px solid var(--blue); }
        .container { max-width: 450px; margin: auto; display: none; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-card { background: var(--card); padding: 15px; border-radius: 12px; text-align: center; border-bottom: 4px solid var(--blue); }
        .main-box { background: var(--card); padding: 20px; border-radius: 20px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 10px; border: 1px solid #334155; background: #020617; color: white; font-size: 16px; box-sizing: border-box; text-align: center; }
        button { width: 100%; padding: 15px; border-radius: 10px; border: none; background: var(--blue); color: white; font-weight: bold; cursor: pointer; }
        .result-card { background: #020617; padding: 15px; border-radius: 10px; margin-top: 15px; border-right: 5px solid var(--blue); line-height: 1.8; }
    </style>
</head>
<body>

    <div id="loginScreen">
        <div class="logo"><img src="https://graph.facebook.com/Mawgif.Jo/picture?type=large" width="70"></div>
        <h2 style="color: var(--blue);">Cs.jo Access</h2>
        <input type="password" id="pin" placeholder="Ø±Ù…Ø² PIN" style="width: 200px;">
        <button onclick="auth()" style="width: 200px;">Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="app" class="container">
        <div style="text-align: center; margin-bottom: 20px;">
            <h1>Cs.jo</h1>
            <small style="color: #94a3b8;">S&B Customer Service Management</small>
        </div>

        <div class="stat-grid">
            <div class="stat-card"><h3>1,998</h3><small>Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†</small></div>
            <div class="stat-card"><h3>0</h3><small>Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª</small></div>
        </div>

        <div class="main-box">
            <h3>ğŸ” ÙØ­Øµ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (MEMBERS)</h3>
            <input id="searchKey" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©...">
            <button onclick="search()">ÙØ­Øµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</button>
            <div id="resultArea"></div>
        </div>
    </div>

    <script>
        const API_URL = "https://rosytalk1.khaled-media.workers.dev/search";
        const KEY = "Mawgif_Secret_2025";

        function auth() {
            if(document.getElementById('pin').value === '2025') {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('app').style.display = 'block';
            } else { alert('Ø®Ø·Ø£!'); }
        }

        async function search() {
            const q = document.getElementById('searchKey').value;
            const res = document.getElementById('resultArea');
            if(!q) return;
            res.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...";

            try {
                const response = await fetch(`${API_URL}?q=${q}`, {
                    headers: { "X-Custom-Auth": KEY }
                });
                const data = await response.json();
                if(data && data.length > 0) {
                    const i = data[0];
                    res.innerHTML = `
                        <div class="result-card">
                            <b>Ø§Ù„Ø§Ø³Ù…:</b> ${i.first_name} ${i.last_name}<br>
                            <b>Ø§Ù„Ø´Ø±ÙƒØ©:</b> ${i.name}<br>
                            <b>Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©:</b> ${i.car_plate}<br>
                            <b style="color:#f59e0b">ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ:</b> ${i.expiry_date}
                        </div>`;
                } else { res.innerHTML = "âš ï¸ Ø§Ù„Ø³Ø¬Ù„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯."; }
            } catch(e) { 
                res.innerHTML = "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±.";
                console.error(e);
            }
        }
    </script>
</body>
</html>

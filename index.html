<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cs.jo - Mawgif Portal</title>
    <style>
        :root { --blue: #007bff; --dark: #0f172a; --card: #1e293b; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--dark); color: white; margin: 0; padding: 15px; }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #loginScreen { position: fixed; inset: 0; background: var(--dark); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; }
        .logo-frame { width: 100px; height: 100px; background: white; border-radius: 20px; display: flex; align-items: center; justify-content: center; border: 3px solid var(--blue); margin-bottom: 20px; }
        .logo-frame img { width: 85%; }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .container { max-width: 480px; margin: auto; display: none; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-card { background: var(--card); padding: 15px; border-radius: 12px; text-align: center; border-bottom: 3px solid var(--blue); }
        
        .main-box { background: var(--card); padding: 20px; border-radius: 18px; margin-bottom: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.4); }
        input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 10px; border: 1px solid #334155; background: #020617; color: white; font-size: 16px; box-sizing: border-box; text-align: center; }
        button { width: 100%; padding: 15px; border-radius: 10px; border: none; background: var(--blue); color: white; font-weight: bold; font-size: 16px; cursor: pointer; }

        .result-card { background: #020617; padding: 15px; border-radius: 10px; margin-top: 15px; border-right: 5px solid var(--blue); line-height: 1.7; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

    <div id="loginScreen">
        <div class="logo-frame"><img src="https://graph.facebook.com/Mawgif.Jo/picture?type=large"></div>
        <h2 style="color: var(--blue);">Cs.jo Secure Access</h2>
        <input type="password" id="pin" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² PIN" style="width: 200px;">
        <button onclick="checkPin()" style="width: 200px;">Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="app" class="container">
        <div style="text-align: center; margin-bottom: 20px;">
            <div class="logo-frame" style="margin: 0 auto 10px;"><img src="https://graph.facebook.com/Mawgif.Jo/picture?type=large"></div>
            <h1>Cs.jo</h1>
            <small style="color: #94a3b8;">S&B Customer Service Management</small>
        </div>

        <div class="stat-grid">
            <div class="stat-card">
                <span style="font-size: 24px; font-weight: bold; color: var(--blue);">1,998</span><br>
                <small>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†</small>
            </div>
            <div class="stat-card">
                <span id="errCount" style="font-size: 24px; font-weight: bold; color: #10b981;">0</span><br>
                <small>Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„ÙŠÙˆÙ…</small>
            </div>
        </div>

        <div class="main-box">
            <h3 style="margin: 0;">ğŸ” ÙØ­Øµ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (MEMBERS)</h3>
            <input id="searchKey" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Card ID)...">
            <button onclick="doSearch()">ÙØ­Øµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</button>
            <div id="results"></div>
        </div>

        <div class="main-box" style="border-top: 3px solid #ef4444;">
            <h3 style="margin: 0; color: #ef4444;">ğŸš¨ Ø¨Ù„Ø§Øº Ø¹Ø·Ù„ Exit1 ST</h3>
            <input id="ticket" placeholder="Ø±Ù‚Ù… Ø§Ù„ØªØ°ÙƒØ±Ø© Ø§Ù„Ù…ØªØ£Ø«Ø±Ø©">
            <button onclick="addLog()" style="background: #ef4444;">ØªØ³Ø¬ÙŠÙ„ Ø¹Ø·Ù„ ÙÙˆØ±ÙŠ</button>
        </div>
    </div>

    <script>
        const API_KEY = "Mawgif_Secret_2025";
        const API_URL = "https://rosytalk1.khaled-media.workers.dev";

        function checkPin() {
            if(document.getElementById('pin').value === '2025') {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('app').style.display = 'block';
            } else { alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±Ù…Ø²!'); }
        }

        async function doSearch() {
            const q = document.getElementById('searchKey').value;
            const resArea = document.getElementById('results');
            if(!q) return;
            resArea.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...";

            try {
                const r = await fetch(`${API_URL}/search?q=${q}`, {
                    headers: { "X-Custom-Auth": API_KEY }
                });
                const data = await r.json();
                if(data.length > 0) {
                    const i = data[0];
                    resArea.innerHTML = `
                        <div class="result-card">
                            <b style="color:var(--blue)">Ø§Ù„Ù…ÙˆØ¸Ù:</b> ${i.name}<br>
                            <b>Ø§Ù„Ø´Ø±ÙƒØ©:</b> ${i.company_name}<br>
                            <b>Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©:</b> ${i.car_plate}<br>
                            <b style="color:#f59e0b">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:</b> ${i.expiry_date || '31.12.2025'}
                        </div>`;
                } else { resArea.innerHTML = "âš ï¸ Ø§Ù„Ø³Ø¬Ù„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯."; }
            } catch(e) { resArea.innerHTML = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„."; }
        }

        function addLog() {
            document.getElementById('errCount').innerText = parseInt(document.getElementById('errCount').innerText) + 1;
            alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ù„Ø§Øº Ø¨Ù†Ø¬Ø§Ø­.');
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cs.jo - Secure Management</title>
    <style>
        :root { --primary: #007bff; --bg: #0f172a; --card: #1e293b; --danger: #ef4444; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); color: white; margin: 0; padding: 15px; }
        
        /* Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #loginOverlay { position: fixed; top:0; left:0; width:100%; height:100%; background: var(--bg); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; }
        
        .header { text-align: center; margin-bottom: 20px; }
        .logo-container { width: 90px; height: 90px; margin: 0 auto 10px; background: white; border-radius: 20px; display: flex; align-items: center; justify-content: center; border: 3px solid var(--primary); overflow: hidden; }
        .logo-container img { width: 85%; height: auto; }
        
        h1 { margin: 0; font-size: 24px; color: var(--primary); }
        .stats { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-box { background: var(--card); padding: 15px; border-radius: 12px; text-align: center; border-bottom: 3px solid var(--primary); }
        .stat-num { font-size: 24px; font-weight: bold; color: var(--primary); display: block; }

        .main-card { background: var(--card); padding: 20px; border-radius: 16px; margin-bottom: 15px; }
        input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 10px; border: 1px solid #334155; background: #020617; color: white; font-size: 16px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; border-radius: 10px; border: none; background: var(--primary); color: white; font-weight: bold; font-size: 16px; cursor: pointer; }
        
        .result-item { background: #020617; padding: 15px; border-radius: 10px; margin-top: 15px; border-right: 5px solid var(--primary); line-height: 1.8; }
        .expired { border-right-color: var(--danger); }
        .tag { background: #334155; padding: 2px 8px; border-radius: 4px; font-size: 11px; color: #38bdf8; }
    </style>
</head>
<body>

    <div id="loginOverlay">
        <div class="logo-container">
            <img src="https://graph.facebook.com/Mawgif.Jo/picture?type=large" alt="Logo">
        </div>
        <h2>Ù†Ø¸Ø§Ù… Cs.jo Ø§Ù„Ø¢Ù…Ù†</h2>
        <input type="password" id="pinInput" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² PIN Ù„Ù„Ø¯Ø®ÙˆÙ„" style="width: 80%; text-align: center;">
        <button onclick="verifyPin()" style="width: 80%;">Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="mainContent" style="display: none;">
        <div class="header">
            <div class="logo-container">
                <img src="https://graph.facebook.com/Mawgif.Jo/picture?type=large" alt="Logo">
            </div>
            <h1>Cs.jo</h1>
            <p style="color: #94a3b8; font-size: 12px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… "Ù…ÙˆÙ‚Ù" Ø§Ù„Ø¯ÙˆØ±ÙŠ</p>
        </div>

        <div class="stats">
            <div class="stat-box">
                <span class="stat-num">1,998</span>
                <span style="font-size: 11px;">Ù…Ø´ØªØ±Ùƒ ÙÙŠ MEMBERS</span>
            </div>
            <div class="stat-box">
                <span class="stat-num" id="errCount">0</span>
                <span style="font-size: 11px;">Ø¨Ù„Ø§ØºØ§Øª entervo Ø§Ù„ÙŠÙˆÙ…</span>
            </div>
        </div>

        <div class="main-card">
            <h3 style="margin:0; font-size:16px;">ğŸ” ÙØ­Øµ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</h3>
            <input id="searchKey" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Ù…Ø«Ø§Ù„: 7042391)...">
            <button onclick="searchInCSV()">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</button>
            <div id="resultArea"></div>
        </div>

        <div class="main-card" style="border-top: 4px solid #10b981;">
            <h3 style="margin:0; font-size:16px; color:#10b981;">ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ø¨Ù„Ø§Øº Exit1 ST</h3>
            <input id="ticketErr" placeholder="Ø±Ù‚Ù… Ø§Ù„ØªØ°ÙƒØ±Ø© Ø§Ù„Ù…ØªØ£Ø«Ø±Ø©">
            <button onclick="logError()" style="background:#10b981;">Ø­ÙØ¸ Ø§Ù„Ø¨Ù„Ø§Øº</button>
        </div>
    </div>

    <script>
        const PIN_CODE = "2025"; // Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
        const API_URL = "https://rosytalk1.khaled-media.workers.dev";
        const API_KEY = "Mawgif_Secret_2025";

        function verifyPin() {
            const input = document.getElementById("pinInput").value;
            if(input === PIN_CODE) {
                document.getElementById("loginOverlay").style.display = "none";
                document.getElementById("mainContent").style.display = "block";
            } else {
                alert("Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­!");
            }
        }

        async function searchInCSV() {
            const q = document.getElementById("searchKey").value;
            const res = document.getElementById("resultArea");
            if(!q) return;

            res.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...";
            try {
                const response = await fetch(`${API_URL}/search?q=${encodeURIComponent(q)}`, {
                    headers: { "X-Custom-Auth": API_KEY }
                });
                const data = await response.json();

                if(data.length > 0) {
                    const item = data[0];
                    // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ù„ÙÙƒ (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø´Ø±ÙƒØ©ØŒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©)
                    res.innerHTML = `
                        <div class="result-item">
                            <span class="tag">${item.car_plate}</span><br>
                            <b>Ø§Ù„Ù…ÙˆØ¸Ù:</b> ${item.name} <br>
                            <b>Ø§Ù„Ø´Ø±ÙƒØ©:</b> ${item.company_name || 'JORDAN AVIATION'} <br>
                            <b style="color:#f59e0b">Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©:</b> 31.12.2025
                        </div>`;
                } else {
                    res.innerHTML = "<div class='result-item expired'>âš ï¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©.</div>";
                }
            } catch (e) { res.innerHTML = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±."; }
        }

        function logError() {
            document.getElementById('errCount').innerText = parseInt(document.getElementById('errCount').innerText) + 1;
            alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¨Ù„Ø§Øº Ø§Ù„Ø¹Ø·Ù„.");
        }
    </script>
</body>
</html>
